<footer class="site-footer h-card">
  <data class="u-url" href="{{ "/" | relative_url }}"></data>

  <div class="wrapper">
    <h2 class="footer-heading" style="text-align:right;">{{ site.title | escape }}</h2>

    <div class="footer-col-wrapper row">
      <div class="footer-col footer-col-1">
        <a href="{{ site.discord_invite }}" target="blank"><img src="{{ '/assets/img/logos/discord.png' | relative_url }}" class="mh-50" alt="Водоворот" style="vertical-align: text-top;"/></a>
      </div>

      <div class="footer-col footer-col-2">
        <a href="https://youtube.com/channel/UC5IikzgR1TeED-DxPLqISHg"><img src="{{ '/assets/img/logos/youtube.png' | relative_url }}" class="mh-50" alt="Amani Youtube" style="vertical-align: text-top;" /></a>
      </div>

      <div class="footer-col footer-col-3">
        <a href="https://www.patreon.com/amani_vodovorot"><img src="/assets/img/logos/patreon.png" class="mh-50" alt="Patreon" style="vertical-align: text-top;"/></a>
      </div>
    </div>

  </div>

  <script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.1/dist/umd/popper.min.js"></script>
  <script src="https://code.jquery.com/jquery-3.5.1.slim.min.js" integrity="sha384-DfXdz2htPH0lsSSs5nCTpuj/zy4C+OGpamoFVy38MVBnE+IbbVYUew+OrCXaRkfj" crossorigin="anonymous"></script>
  <script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.1/dist/umd/popper.min.js" integrity="sha384-9/reFTGAW83EW2RDu2S0VKaIzap3H66lZH81PoYlFhbGU+6BZp6G7niu735Sk7lN" crossorigin="anonymous"></script>
  <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js" integrity="sha384-B4gt1jrGC7Jh4AgTPSdUtOBvfO8shuf57BaghqFfPlYxofvL8/KUEfYiJOMMV+rV" crossorigin="anonymous"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js"></script>

  <script>
    $(document).on('click', '.dropdown-menu', function (e) {
        e.stopPropagation();
    });

    // make it as accordion for smaller screens
    if ($(window).width() < 992) {
        $('.dropdown-menu a').click(function(e){
            //e.preventDefault();
            if($(this).next('.submenu').length){
                $(this).next('.submenu').toggle();
            }
            $('.dropdown').on('hide.bs.dropdown', function () {
                $(this).find('.submenu').hide();
            })
        });
    }

     $(function() {
         var index = 0;
         $("pre > code").each(function() {
             index++;
             $(this).attr("id", "code" + index);
             $(this).append($('<button type="button" class="btn btn-outline-light copy-btn"\
                 data-toggle="tooltip" data-placement="bottom" title="Скопировать" data-clipboard-target="#code'+index+'">\
                 <svg width="1em" height="1em" viewBox="0 0 16 16" class="bi bi-file-earmark-post-fill" fill="currentColor" xmlns="http://www.w3.org/2000/svg">\
                 <path fill-rule="evenodd" d="M2 2a2 2 0 0 1 2-2h5.293A1 1 0 0 1 10 .293L13.707 4a1 1 0 0 1 .293.707V14a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V2zm7 2l.5-2.5 3 3L10 5a1 1 0 0 1-1-1zM4.5 3a.5.5 0 0 0 0 1H7a.5.5 0 0 0 0-1H4.5zm0 3a.5.5 0 0 0-.5.5v7a.5.5 0 0 0 .5.5h7a.5.5 0 0 0 .5-.5v-7a.5.5 0 0 0-.5-.5h-7z"/>\
                 </svg></button>'));
         });
     });

    var clipboard = new ClipboardJS('.copy-btn');


    function setTooltip(btn, message) {
        $(btn).tooltip('hide')
            .attr('data-original-title', message)
            .tooltip('show');
    }

    function hideTooltip(btn) {
        setTimeout(function() {
            $(btn).tooltip('hide');
        }, 1000);
    }


    clipboard.on('success', function(e) {
        e.clearSelection();
        setTooltip(e.trigger, 'Скопировано!');
        hideTooltip(e.trigger);
    });

    clipboard.on('error', function(e) {
        setTooltip(e.trigger, 'Ошибка!');
        hideTooltip(e.trigger);
    });

    $(function () {
        $('[data-toggle="tooltip"]').tooltip({ boundary: 'window' });
    });

  </script>

</footer>
